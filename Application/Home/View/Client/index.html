<div class="container" style="margin-top: 81px">
    <form id="clientform" role="form" method="get" action="<{:U('client/index')}>">
        <div class="row">
            <div class=" col-xs-12 col-sm-1 col-sm-offset-1 " style="margin-bottom: 14px">
                <select class="selectpicker" name="query_type">
                    <option value="1"
                    <?php if(isset($query['type']) && $query['type']=='1'){echo 'selected="selected"';}?>>按客户姓名</option>
                    <option value="2"
                    <?php if(isset($query['type']) && $query['type']=='2'){echo 'selected="selected"';}?>
                    >按房产信息</option>
                    <option value="3"
                    <?php if(isset($query['type']) && $query['type']=='3'){echo 'selected="selected"';}?>
                    >按余额低于X</option>
                </select>
            </div>
            <div class="col-xs-6 col-sm-3 col-sm-offset-3 col-md-offset-2" style="margin-bottom: 14px">
                <input type="text" value="<?php if(isset($query['query']) && $query['query']){echo $query['query'];}?>"
                       name="query" class="form-control" placeholder="请输入查询信息">
            </div>
            <div class="col-xs-6 col-sm-2" style="margin-bottom: 14px">
                <button type="submit" class="btn btn-default"><span class="fa fa-search"></span> 查询客户</button>
            </div>
        </div>

        <div class="row" style="margin-top: 14px">
            <div class="col-sm-2 col-sm-offset-1">
                <a href="<{:U('Client/index')}>" class="btn btn-primary"><span class="fa fa-user-circle"></span>
                    全部客户</a>
            </div>
        </div>
    </form>
</div>


<!--已录入编辑-->
<div class="container" style="margin-top: 30px;margin-bottom: 100px">
    <div class="row">

        <div class="col-sm-10 col-sm-offset-1 col-xs-12" style="margin-bottom: 10px;margin-top: -10px">
            <div>
                系统本次为您查到 <{$count}> 个客户</span> </div>
        </div>
        <div class="col-sm-10 col-sm-offset-1 col-xs-12 table-responsive table-client" style="display: none">

            <table class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th style="width: 10%">客户编号</th>
                    <th style="width: 10%">姓名</th>
                    <th style="width: 30%">客户房产</th>
                    <th style="width: 10%">客户余额</th>
                    <th style="width: 20%">档案地址</th>
                    <th style="width:15%">操作</th>
                </tr>
                </thead>
                <tbody>
                <?php
                 if(isset($client) and count($client)>0){
                foreach($client as $vo){
                ?>
                <tr>
                    <td style="width: 10%"><?=$vo['id']; ?></td>
                    <td style="width: 10%"><?=$vo['name'];?></td>
                    <td style="width: 30%"><?=$vo['property'];?></td>
                    <td style="width: 10%"><?php if($vo['balance']<=0){echo "<span style='color:red;font-weight:700'>
                        {$vo['balance']}</span>";}else{echo $vo['balance'];}; ?>
                    </td>
                    <td style="width: 20%"><?=$vo['profile'];?></td>
                    <td style="width: 15%"><a href="<{:U('Client/info',array('id'=>$vo['id']))}>"
                                              class="btn btn-sm btn-primary"><span class="fa fa-search"></span> 编辑</a>
                        <a href="<{:U('Client/delete',array('id'=>$vo['id']))}>"
                           class="delete btn btn-sm btn-default"><span class="fa fa-trash"></span> 撤销</a></td>
                </tr>
                <?php }} ?>
                </tbody>
            </table>
            <nav>
                <ul class="pagination">
                    <{$page}>
                </ul>
            </nav>
        </div>


    </div>


</div>


<script src="__PUBLIC__/js/jquery1.11.1.min.js"></script>
<script src="__PUBLIC__/dist/js/bootstrap.min.js"></script>
<script src="__PUBLIC__/vendor/bootstrap-validator/bootstrapValidator.min.js"></script>
<script src="__PUBLIC__/dist-select/js/bootstrap-select.js"></script>
<script src="__PUBLIC__/js/bootbox.min.js"></script>
<script>
    $('.navbar-nav li:eq(5)').addClass('active');


    $(".delete").click(function (event) {
        var cur = this;
        event.preventDefault();
        bootbox.confirm({
            message: "温馨提示:一经撤销不可恢复喔...",
            buttons: {
                cancel: {
                    label: '<i class="fa fa-times"></i> 取消'
                },
                confirm: {
                    label: '<i class="fa fa-check"></i> 确认'
                }
            },
            callback: function (result) { /* result is a boolean; true = OK, false = Cancel*/
                if (result) {
                    window.location.href = $(cur).attr("href");
                }
            }
        });
    });


</script>

<script>
    $(function () {
        $('.table-client').fadeIn(1500);
        $('#clientform').bootstrapValidator({
            fields: {
                query: {
                    validators: {
                        notEmpty: {
                            message: '搜索信息不能为空'
                        },
                        stringLength: {
                            min: 1,
                            max: 40,
                            message: '关键字最多为40个字符'
                        }
                    }
                }
            }
        });

    });
</script>
